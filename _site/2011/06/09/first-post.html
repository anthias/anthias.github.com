<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Jeff Blasius | Subversion Restore</title>
	<link rel="alternate" type="application/atom+xml" title="Jeff Blasius - Atom" href="http://feeds.feedburner.com/benubois" />
	<link rel="stylesheet" href="/css/master.css" />
	<script src="/js/master.js"></script>
</head>

<body>

	<header>
		<div class="container">
			<p id="logo"><a href="/">Jeff Blasius</a></p>
			<nav>
				<ul class="clearfix">
					<li><a href="/about.html">About</a></li>
					<li><a href="/archive.html">Archive</a></li>
				</ul>
			</nav>
		</div>
	</header>

	<section id="content-wrap">
		<div class="container">

		<article class="post container">
	<h2>Subversion Restore</h2>
	<div class="post-meta span-3">
		<time class="pill" datetime="2011-06-09">June 09, 2011</time>
	</div>
	<div class="post-content span-15 last">
		<p>A way to restore an svn repository from dumps of individual commits. This is a companion to the <a href="/2010/02/22/bare-bones-svn-backup.html">Subversion backup script</a>.</p>

<div class="highlight"><pre><code class="ruby"><span class="c1">#!/usr/bin/env ruby</span>
<span class="n">floor</span> <span class="o">=</span> <span class="n">start_revision</span>
<span class="n">ceiling</span> <span class="o">=</span> <span class="n">end_revision</span>
 
<span class="n">floor</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="n">ceiling</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="sb">`gunzip </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="sb">.dump.gz`</span>
  <span class="nb">puts</span> <span class="sb">`svnadmin load /path/to/repos &lt; </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="sb">.dump`</span>
  <span class="nb">puts</span> <span class="sb">`rm -f </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="sb">.dump`</span>
<span class="k">end</span>
</code></pre>
</div>




	</div>
</article>
			
		</div>
	</section>

	<footer class="container">
		<p>Copyright &copy; 2011&ndash;2011 <a href="mailto:jeff.blasius@gmail.com">Jeff Blasius</a></p>
	</div>
</body>
</html>
